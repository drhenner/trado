- content_for :title, 'Submit your billing address'

.container
  .row
    / ==========
    / = Main content =
    / ==========
    %section.span12
      .checkout-container
        .row
          .span10.offset1
            / ==========
            / = Header =
            / ==========
            %header
              .row
                .span6.offset2
                  .center-align
                    %h1
                      %span.light Billing
                      details
                .span2
            / ==========
            / = Steps =
            / ==========
            .checkout-steps
              .clearfix
                .step.done
                  .step-badge
                    %i.fa.fa-check
                  = link_to 'Review cart', wizard_path(:review)
                .step.active
                  .step-badge 2
                  Billing details
                .step
                  .step-badge 3
                  Shipping address
                .step
                  .step-badge 4
                  Payment method
                .step
                  .step-badge 5
                  Confirm & pay
            / /steps
            / ==========
            / = Shipping addr form =
            / ==========
            /= @billing_address
            = form_for @billing_address, :url => wizard_path, :html => { method: :patch, :class => 'form-horizontal form-checkout' } do |f|
              .control-group
                = f.label :first_name, :class => 'control-label' do
                  First name
                  %span.red-clr.bold *
                .controls
                  = f.text_field :first_name, :class => 'span4', :id => 'billing_first_name'
                  = errors_for @billing_address, :first_name
              .control-group
                = f.label :last_name, :class => 'control-label' do
                  Last name
                  %span.red-clr.bold *
                .controls
                  = f.text_field :last_name, :class => 'span4', :id => 'billing_last_name'
                  = errors_for @billing_address, :last_name
              .control-group
                = f.label :telephone, :class => 'control-label' do
                  Telephone
                .controls
                  = f.text_field :telephone, :class => 'span4', :id => 'billing_telephone'
              .control-group
                = f.label :company, :class => 'control-label' do
                  Company
                .controls
                  = f.text_field :company, :class => 'span4', :id => 'billing_company'
              = fields_for @order do |ff|
                .control-group
                  = ff.label :tax_number, :class => 'control-label' do
                    Tax number
                  .controls
                    = ff.text_field :tax_number, :class => 'span4', :id => 'tax_number'
              .control-group
                = f.label :address, :class => 'control-label' do
                  Street address
                  %span.red-clr.bold *
                .controls
                  = f.text_field :address, :class => 'span4', :id => 'billing_address'
                  = errors_for @billing_address, :address
              .control-group
                = f.label :city, :class => 'control-label' do
                  City
                  %span.red-clr.bold *
                .controls
                  = f.text_field :city, :class => 'span4', :id => 'billing_city'
                  = errors_for @billing_address, :city
              .control-group
                = f.label :postcode, :class => 'control-label' do
                  Postcode
                  %span.red-clr.bold *
                .controls
                  = f.text_field :postcode, :class => 'span4', :id => 'billing_postcode'
                  = errors_for @billing_address, :postcode
              .control-group
                = f.label :county, :class => 'control-label' do
                  County
                .controls
                  = f.text_field :county, :class => 'span4', :id => 'billing_county'
              .control-group
                = f.label :country, :class => 'control-label' do
                  Country
                  %span.red-clr.bold *
                .controls
                  = f.select(:country, options_for_select(Country.all.map { |country| [country.name, country.name ] }, :selected => @billing_address.country), { :include_blank => 'Please select...'})
                  = errors_for @billing_address, :country
              %hr/
              %p.right-align
                = f.submit 'Continue', :class => 'btn btn-primary higher bold'
    / /main content
/ /container