//= require jquery
//= require jquery.turbolinks
//= require jquery_ujs
//= require admin/soca
//= require jquery.scrollTo/jquery.scrollTo.min
//= require redactor-rails/redactor
//= require redactor-rails/config
//= require redactor-rails/index
//= require admin/chart
//= require turbolinks

var taxRate = "<%= Store::settings.tax_rate %>";
     
ready = function()
{
    soca.animation.loading();
    soca.animation.colourCaveat();
    soca.filter.tableRowTarget();
    soca.filter.products();
    soca.misc.taxField();
    soca.misc.multiSelect();
    soca.misc.updateTableHeight();
    soca.mobile.disableTooltips();
    soca.mobile.triggerMenu();
    var pieData = [
        {
            value: 70,
            color:"#00aff1",
            highlight: "",
            label: "PayPal"
        },
        {
            value: 20,
            color: "#8DC73F",
            highlight: "",
            label: "Cheque"
        },
        {
            value: 10,
            color: "#F7941D",
            highlight: "",
            label: "Bank transfer"
        }
    ];
    var ctx2 = $("#pieChart").get(0).getContext("2d");
    var myDoughnutChart = new Chart(ctx2).Doughnut(pieData);
};

$(document).ready(ready);
$(document).on('page:change page:load', function()
{
    $('.redactor').redactor({
        replaceDivs: false,
        convertDivs: false,
        minHeight: 300
    });
    $('[data-toggle=tooltip]').tooltip('hide');
    $('.main .container').removeClass('fadeOut').addClass('animated fadeIn');
});
$(document).on('page:fetch', function()
{
    $('.main .container').addClass('animated fadeOut');
    return $('.loading5').addClass('active');
});

$(document).on("page:receive", function(){
    $('.loading-overlay').removeClass('active');
    return $('.loading5').removeClass('active');
});

$(document).ajaxComplete(function()
{
    soca.misc.taxField();
});
